<!-- header -->
<div class="header_top">
  <div class="inner flex-b-c">
      <h1 class="logo">
        <a href="/main/main.html">
          <picture>
            <source media="(max-width: 768px)" srcset="../assets/img/common/logo_m.png">
            <img src="../assets/img/common/logo.png" alt="보험개발원 보험정보 빅데이터 플랫폼 로고">
          </picture>
        </a>
      </h1>

      <nav id="gnb" class="gnb_list">
        <ul class="menu-01" >
          <!-- 보험통계 -->
          <li>
            <a href="#!" class="dep1">보험통계</a>
            <div class="gnb_hover">
              <div class="inner flex">
                <div class="gnb_ttl">
                  <strong>보험<span class="">통계</span></strong>
                </div>
                <ul class="dep2">
                  <li><a href="#!">50대 주요 보험지표</a></li>
                  <li><a href="/ins_stats/retirement_list.html">은퇴시장 관련 통계정보</a></li>
                  <li><a href="#!">보험통계 조회서비스</a></li>
                </ul>
              </div>
            </div>
          </li>
          <!-- 알쓸보험 -->
          <li>
            <a href="../ins_info/weekly_list.html" class="dep1">알·쓸 보험</a>
            <div class="gnb_hover">
              <div class="inner flex">
                <div class="gnb_ttl">
                  <strong>알·쓸 <span class="">보험</span></strong>
                </div>
                <ul class="dep2">
                  <li><a href="/ins_info/weekly_list.html">Weekly 보험상식</a></li>
                  <li><a href="/ins_info/dictionary.html">보험용어 사전</a></li>
                  <li>
                    <a href="/ins_info/interest_rate.html" class="dep3_ttl">공시기준이율</a>
                    <ul class="dep3">
                      <li><a href="/ins_info/interest_rate.html">과거공시기준이율</a></li>
                      <li><a href="/ins_info/interest_rate_standard.html">공시기준이율 산출기준</a></li>
                      <li><a href="/ins_info/interest_rate_down.html">공시기준이율 DOWNLOAD</a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="/ins_info/car_price.html" class="dep3_ttl">자동차보험 정보</a>
                    <ul class="dep3">
                      <li><a href="/ins_info/car_price.html">차량기준가액</a></li>
                      <li><a href="/ins_info/car_model_grade.html">차량모델등급</a></li>
                      <li><a href="/ins_info/traffic_accident_status.html">광역시도별 고통사고 현황</a></li>
                      <li><a href="/ins_info/repair_standard.html">경미손상 수리기준</a></li>
                      <li><a href="/ins_info/interest_rate_down.html">자동차보험 원가지수</a></li>
                    </ul>
                  </li>
                  <li>
                    <a href="/ins_info/insurance_agency.html" class="dep3_ttl">국내외 보험 관련기관</a>
                    <ul class="dep3">
                      <li><a href="/ins_info/insurance_agency.html">보험기관</a></li>
                      <li><a href="/ins_info/related_agency.html">유관기관</a></li>
                      <li><a href="/ins_info/overseas_agency.html">해외보험기관</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </li>
          <!-- 마이보험 -->
          <li>
            <a href="#!" class="dep1">MY 보험</a>
            <div class="gnb_hover">
              <div class="inner flex">
                <div class="gnb_ttl">
                  <strong>MY <span class="">보험</span></strong>
                </div>
                <ul class="dep2">
                  <li> <a href="/ins_info/dictionary.html">건강정보에 따른 주요 질환 예측 정보</a> </li>
                  <li><a href="/ins_info/interest_rate.html">자동차보험 과납보험료 및 휴면보험금 조회시스템</a></li>
                  <li><a href="/ins_info/interest_rate.html">내 차 보험 찾기(Mycar)</a></li>
                  <li><a href="/ins_info/interest_rate.html">자동차보험 할인할증요인 조회</a></li>
                  <li><a href="/ins_info/interest_rate.html">자동차보험정보 고객센터</a></li>
                  <li><a href="/ins_info/interest_rate.html">대리운전자보험 조회시스템</a></li>
                  <li><a href="/ins_info/interest_rate.html">자동차사고이력정보(CarHistory)</a></li>
                </ul>
              </div>
            </div>
          </li>
          <!-- 보험소식 -->
          <li>
            <a href="#!" class="dep1">보험소식</a>
            <div class="gnb_hover">
              <div class="inner flex">
                <div class="gnb_ttl">
                  <strong>보험소식</strong>
                </div>
                <ul class="dep2">
                  <li><a href="/report/insurance_trends_list.html">국내보험동향</a></li>
                  <li><a href="/report/company_statistics_lsit.html">기업성보험 통계보고서</a></li>
                  <li><a href="/report/monthly_list.html">Monthly KIDI Brief</a></li>
                  <li><a href="/ins_info/monthly_list.html">서비스 안내</a></li>
                </ul>
              </div>
            </div>
          </li>
      
        </ul>
      </nav>
      
      <div class="flex--c h_btn_area">
        <button type ="button"  class="head_search_btn"
          title="검색창 열기" aria-label="검색창 열기"></button>
        <button type ="button"  class="ham_btn"
            title="전체메뉴 열기" aria-label="전체메뉴 열기"></button>
      </div>
  </div>
</div>



<div id="h_search" class="h_search"  aria-labelledby="검색창">
  <div class="inner">
    <div class="h_search_box">
      
      <!-- 일단 검색버튼 클릭 시 링크이동 될 수있도록 form태그로 연결시켜놨습니다 -->
      <form action="../sub/search_main.html">
        <div class="form-item search_form">
          <label for="in_text" class="hidden">검색어 입력</label>
          <input type="text" class="bs-input" id="in_text" placeholder="검색어를 입력해주세요" title="검색어 입력">
          <button type="submit" 
            aria-label="입력 후 검색 버튼" class="form_search"></button>
        </div>
      </form>
  
      <div class="keyword_list flex">
        <em>추천검색어</em>
        <div>
          <a href=" ../sub/search_main.html">#자동차보험</a>
          <a href="../sub/search_main.html">#휴면보험금</a>
          <a href="../sub/search_main.html">#휴차료 알림표</a>
          <a href="../sub/search_main.html">#카 히스토리 </a>
          <a href="../sub/search_main.html">#차량기준가액</a>
          <a href="../sub/search_main.html">#휴면보험금</a>
          <a href="../sub/search_main.html">#휴차료 알림표</a>
          <a href="../sub/search_main.html">#카 히스토리 </a>
        </div>
      </div>
    </div>
    <button type ="button"  class="search_close"
      title="검색 닫기" aria-label="검색 닫기"></button>
  </div>
</div>


<div id="all_menu_wrap" class="all_menu_wrap"  aria-labelledby="전체 메뉴">
  <div class="inner">
    <div>
      <!-- 전체메뉴 스크립트로 불러옴 -->
    </div>
    <button type ="button"  class="ham_close"
    title="전체메뉴 닫기" aria-label="전체메뉴 닫기"></button>
  </div>
</div>

<div class="bg"></div>
<!-- // header -->


<script>
  $(document).ready(function() {

    gnbCommonText()
    hamOn()
    hamClose() 
    viewSearch()

    var previousFocusElement;

    function openSubMenu($menuItem) {
      $menuItem.parent('li').addClass('on').siblings().removeClass('on');
    }
  
    // 메뉴가 포커스를 받았을 때
    $('#gnb .dep1').on('focus mouseenter', function() {
      $('html').addClass('gnb_in');
      $(this).siblings().find('.dep2 li').removeClass('on');
      openSubMenu($(this).siblings('.gnb_hover'));

    });
  
    // dep2 아이템에 포커스 또는 마우스 이벤트가 발생했을 때
    $('#gnb .dep2 li a').on('focus mouseenter', function() {
      $(this).parent('li').addClass('on').siblings().removeClass('on');
    });
  
    $('#gnb').on('focusout mouseleave', function(event) {
      // 포커스 아웃 및 마우스 리브 이벤트가 발생한 요소가 gnb_hover 내에 없는 경우에만 클래스 제거
      if (!$(event.relatedTarget).closest('.gnb_hover').length) {
        $('html').removeClass('gnb_in');
        $('#gnb .dep1').parent().removeClass('on');
      }
    });

    if ($(window).innerWidth() < 768) {
        $('.all_menu_wrap .menu-01 > li').eq(0).addClass('open')
        $('.all_menu_wrap .dep1').on('click',function(e){
          e.preventDefault(); 
          $(this).parent().addClass('open').siblings().removeClass('open')
        })
    }
  



    //  모바일에서 2뎁스 클릭시 3뎁스 보기
    $('.all_menu_wrap .dep2 >li').find('.dep3_ttl').click(function(e) {
        if ($(window).innerWidth() < 768) {
            e.preventDefault(); 
            if ($(this).parent().hasClass('open') == true) {
                $(this).parent().removeClass('open');
                $(this).next('.dep3').slideUp();
            } else {
                $('.all_menu_wrap .dep2 >li').removeClass('open');
                $(this).parent().addClass('open');
                $('.dep3').slideUp();
                $(this).next('.dep3').slideDown();
            }
        }
    })


  });

  $(window).on('load resize', function () {
        if ($(window).innerWidth() < 768) {
          $('.all_menu_wrap .menu-01 > li').eq(0).addClass('open')
        } 
    })


  function gnbCommonText() {
    let gnbList = $('#gnb').html();
    $('.all_menu_wrap > .inner> div ').html(gnbList);
  }
  function hamOn() {
    $('.ham_btn').on('click', function () {
      $('html').toggleClass('fixed gnbOpen');
      $('html').removeClass('show_search');
      $('.h_search').slideUp()

    });
  }
  function hamClose() {
    $('.all_menu_wrap .ham_close').on('click', function () {
      $('html').removeClass('fixed gnbOpen');
    });
  }
  function viewSearch() {
    $('.head_search_btn').on('click',function(){
      previousFocusElement = document.activeElement;
      $('.h_search').slideDown()
      $('html').addClass('fixed show_search');
      $('html').removeClass('gnbOpen');

      $('#in_text').focus();
      $('.search_close').on('click',function(){
        $('.h_search').slideUp()
        $('html').removeClass('fixed show_search');
        if (previousFocusElement) {
          previousFocusElement.focus();
        }
      })
    })
  }






  </script>